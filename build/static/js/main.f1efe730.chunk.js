(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports={ACCESS_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTMyLCJlbWFpbCI6ImVya2thLnB5eWtvbmVuQGdtYWlsLmNvbSIsImlhdCI6MTU1MDg1Njg0Nn0.ol4d2mkfzUQK9Ji3CuMrYmMmOkj0SElIiisXz4b5fI0"}},23:function(e,t,n){e.exports=n(56)},29:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(19),s=n.n(l),c=(n(29),n(6)),o=n.n(c),u=n(22),i=n(7),m=n(8),E=n(10),d=n.n(E),f=null,v={getData:function(){var e=Object(i.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:f}},e.next=3,d.a.get("".concat("https://opendata.hopefully.works/api","/events"),t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),setToken:function(e){f="bearer ".concat(e)},create:function(){var e=Object(i.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/api/data",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),getHistory:function(){var e=Object(i.a)(o.a.mark(function e(){var t;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/data");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},p=function(e){var t=e.message,n=e.status;return null===t?null:"success"===n?r.a.createElement("div",{className:"success"},t):r.a.createElement("div",{className:"error"},t)},h=n(20),g=n.n(h),b=function(e){return console.log("Data from eficode API: ",e),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("strong",null,"Date:")," ",e.data.date),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 1:")," ",e.data.sensor1),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 2:")," ",e.data.sensor2),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 3:")," ",e.data.sensor3),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 4:")," ",e.data.sensor4),r.a.createElement("p",null))},S=function(e){var t=e.currentData,n=e.newData,a=e.allData;return r.a.createElement("div",null,r.a.createElement("h3",null,"Current data:"),r.a.createElement(b,{data:t}),r.a.createElement("button",{onClick:function(){return n()}},"Submit data to database"),function(e){var t=0,n=0,a=0,l=0;return e.forEach(function(e){t+=e.sensor1,n+=e.sensor2,a+=e.sensor3,l+=e.sensor4}),t/=e.length,n/=e.length,a/=e.length,l/=e.length,r.a.createElement("div",null,r.a.createElement("h3",null,"Average of all gathered sensor data:"),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 1:")," ",t),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 2:")," ",n),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 3:")," ",a),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 4:")," ",l),r.a.createElement("p",null))}(a),function(e){var t=0,n=0,a=0,l=0;return e.forEach(function(e){e.sensor1>t&&(t=e.sensor1),e.sensor2>n&&(n=e.sensor2),e.sensor3>a&&(a=e.sensor3),e.sensor4>l&&(l=e.sensor4)}),r.a.createElement("div",null,r.a.createElement("h3",null,"The peak of every sensor:"),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 1:")," ",t),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 2:")," ",n),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 3:")," ",a),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 4:")," ",l),r.a.createElement("p",null))}(a),function(e){var t=2147e6,n=2147e6,a=2147e6,l=2147e6;return e.forEach(function(e){e.sensor1<t&&(t=e.sensor1),e.sensor2<n&&(n=e.sensor2),e.sensor3<a&&(a=e.sensor3),e.sensor4<l&&(l=e.sensor4)}),r.a.createElement("div",null,r.a.createElement("h3",null,"The bottom of every sensor:"),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 1:")," ",t),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 2:")," ",n),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 3:")," ",a),r.a.createElement("div",null,r.a.createElement("strong",null,"Sensor 4:")," ",l),r.a.createElement("p",null))}(a))},y=function(e){var t=e.allData;return r.a.createElement("div",null,r.a.createElement("h3",null,"History of past data:"),t.map(function(e){return r.a.createElement(b,{key:e.id,data:e})}))},O=n(60),w=n(58),k=n(59),j=function(){var e=Object(a.useState)({}),t=Object(m.a)(e,2),n=t[0],l=t[1],s=Object(a.useState)([]),c=Object(m.a)(s,2),E=c[0],d=c[1],f=Object(a.useState)(null),h=Object(m.a)(f,2),b=h[0],j=h[1],I=Object(a.useState)(""),x=Object(m.a)(I,2),C=x[0],D=x[1];Object(a.useEffect)(function(){v.setToken(g.a.ACCESS_TOKEN),v.getData().then(function(e){l(e),console.log("fetched data:",n)}).then(console.log(n)),v.getHistory().then(function(e){d(e)})},[]);var T=function(){var e=Object(i.a)(o.a.mark(function e(){var t,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=Object(u.a)({},n),e.next=4,v.create(t);case 4:a=e.sent,d(E.concat(a)),D("success"),j("New data succesfully added"),setTimeout(function(){j(null),D("")},5e3),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(0),D("error"),j("This data already exists in the database!"),setTimeout(function(){j(null),D("")},5e3),console.log(e.t0);case 17:case"end":return e.stop()}},e,null,[[0,11]])}));return function(){return e.apply(this,arguments)}}(),N={padding:5};return r.a.createElement("div",null,r.a.createElement(O.a,null,r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(w.a,{style:N,to:"/"},"home"),r.a.createElement(w.a,{style:N,to:"/history"},"history")),r.a.createElement(p,{message:b,status:C}),r.a.createElement("h1",null,"Open data Task"),r.a.createElement(k.a,{exact:!0,path:"/",render:function(){return r.a.createElement(S,{currentData:n,newData:T,allData:E})}}),r.a.createElement(k.a,{exact:!0,path:"/history",render:function(){return r.a.createElement(y,{allData:E})}}))))};n(53).config(),s.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.f1efe730.chunk.js.map